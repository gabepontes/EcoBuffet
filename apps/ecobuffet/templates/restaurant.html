[[extend 'layout.html']]
<div class="section" id="vue-target" v-cloak>
    <div class="box">
        <h1 class="title has-text-centered">Menu</h1>
        <div class="tile-ancestor">
            <!-- Generate a menu of items in a grid -->
            <div class="tile is-parent" v-for="group in formatted_items">
                <div class="tile is-child is-vertical" v-for="idx in group">
                    <div v-if="idx != null">
                        <div class="box is-shadowless">
                            <!-- Generate a single item in a nice format. -->
                            <!-- Encapsulate each element in a tile. -->
                            <!-- Buttons to like/dislike the item. -->
                            <div class="tile level">
                                <span class="tile title is-5 level-item">{{items[idx].name}}</span>
                                <a class="button is-success is-light level-item block m-0" @click="like_item(idx)">Like</a>
                                <a class="button is-danger is-light level-item block m-0" @click="dislike_item(idx)">Dislike</a>

                            </div>
                            <figure class="image is-4by3 tile">
                                <img :src="items[idx].image" class="tile has-text-centered">{{items[idx].image}}</img>
                            </figure>
                            <div class="box tile">{{items[idx].description}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let get_restaurants_url = "[[=XML(get_restaurants_url)]]";
  let get_items_url = "[[=XML(get_items_url)]]";
  let like_item_url = "[[=XML(like_item_url)]]";
  let dislike_item_url = "[[=XML(dislike_item_url)]]";
</script>

<script src="js/axios.js"></script>
<script src="js/sugar.js"></script>
<script src="js/restaurant.js"></script>
[[end]]
