{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gabri\\\\cse 115a\\\\EcoBuffet\\\\client\\\\src\\\\AddEditItems.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, FormControl, FormLabel, Input, Textarea, VStack, Box } from \"@chakra-ui/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddEditItems = _ref => {\n  _s();\n  let {\n    itemId\n  } = _ref;\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [previewImageUrl, setPreviewImageUrl] = useState(null);\n  useEffect(() => {\n    if (itemId) {\n      fetchItem();\n    }\n  }, [itemId]);\n  const fetchItem = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/items/${itemId}`);\n      const item = response.data;\n      setName(item.name);\n      setDescription(item.description);\n      setPreviewImageUrl(item.image_url);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Error: Unable to fetch the item.\");\n    }\n  };\n  const onFileChange = e => {\n    const file = e.target.files[0];\n    setImage(file);\n    if (file) {\n      setPreviewImageUrl(URL.createObjectURL(file));\n    } else {\n      setPreviewImageUrl(null);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!name || !description || !image && !itemId) {\n      alert(\"Please fill all the fields and select an image.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"description\", description);\n    if (image) {\n      formData.append(\"image\", image);\n    }\n    try {\n      const response = await axios.post(itemId ? `http://localhost:5000/edit_item/${itemId}` : \"http://localhost:5000/add_item\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      if (response.data.status === \"success\") {\n        alert(itemId ? \"Item updated successfully!\" : \"Item added successfully!\");\n        setName(\"\");\n        setDescription(\"\");\n        setImage(null);\n        setPreviewImageUrl(null);\n      } else {\n        alert(\"Error: \" + response.data.message);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Error: Unable to add/update the item.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(VStack, {\n    spacing: 4,\n    mt: 4,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: itemId ? \"Edit Item\" : \"Add Item\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"name\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          id: \"name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"description\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n          id: \"description\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"image\",\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"file\",\n          id: \"image\",\n          accept: \"image/*\",\n          onChange: onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), previewImageUrl && /*#__PURE__*/_jsxDEV(Box, {\n        mt: 4,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewImageUrl,\n          alt: \"Preview\",\n          style: {\n            width: \"200px\",\n            height: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"teal\",\n        type: \"submit\",\n        mt: 4,\n        children: itemId ? \"Update\" : \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(AddEditItems, \"xTffKDHkeKxvIJb6S+Cm7aBk5UM=\");\n_c = AddEditItems;\nexport default AddEditItems;\nvar _c;\n$RefreshReg$(_c, \"AddEditItems\");","map":{"version":3,"names":["React","useState","useEffect","axios","Button","FormControl","FormLabel","Input","Textarea","VStack","Box","jsxDEV","_jsxDEV","AddEditItems","_ref","_s","itemId","name","setName","description","setDescription","image","setImage","previewImageUrl","setPreviewImageUrl","fetchItem","response","get","item","data","image_url","error","console","alert","onFileChange","e","file","target","files","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","append","post","headers","status","message","spacing","mt","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","value","onChange","accept","src","alt","style","width","height","colorScheme","_c","$RefreshReg$"],"sources":["C:/Users/gabri/cse 115a/EcoBuffet/client/src/AddEditItems.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Button,\r\n  FormControl,\r\n  FormLabel,\r\n  Input,\r\n  Textarea,\r\n  VStack,\r\n  Box,\r\n} from \"@chakra-ui/react\";\r\n\r\nconst AddEditItems = ({ itemId }) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n  const [previewImageUrl, setPreviewImageUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (itemId) {\r\n      fetchItem();\r\n    }\r\n  }, [itemId]);\r\n\r\n  const fetchItem = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/items/${itemId}`);\r\n      const item = response.data;\r\n      setName(item.name);\r\n      setDescription(item.description);\r\n      setPreviewImageUrl(item.image_url);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      alert(\"Error: Unable to fetch the item.\");\r\n    }\r\n  };\r\n\r\n  const onFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setImage(file);\r\n    if (file) {\r\n      setPreviewImageUrl(URL.createObjectURL(file));\r\n    } else {\r\n      setPreviewImageUrl(null);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!name || !description || (!image && !itemId)) {\r\n      alert(\"Please fill all the fields and select an image.\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"name\", name);\r\n    formData.append(\"description\", description);\r\n    if (image) {\r\n      formData.append(\"image\", image);\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        itemId ? `http://localhost:5000/edit_item/${itemId}` : \"http://localhost:5000/add_item\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.data.status === \"success\") {\r\n        alert(itemId ? \"Item updated successfully!\" : \"Item added successfully!\");\r\n        setName(\"\");\r\n        setDescription(\"\");\r\n        setImage(null);\r\n        setPreviewImageUrl(null);\r\n      } else {\r\n        alert(\"Error: \" + response.data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      alert(\"Error: Unable to add/update the item.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <VStack spacing={4} mt={4}>\r\n      <h1>{itemId ? \"Edit Item\" : \"Add Item\"}</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <FormControl>\r\n          <FormLabel htmlFor=\"name\">Name</FormLabel>\r\n          <Input\r\n            type=\"text\"\r\n            id=\"name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n        </FormControl>\r\n        <FormControl>\r\n          <FormLabel htmlFor=\"description\">Description</FormLabel>\r\n          <Textarea\r\n            id=\"description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n        </FormControl>\r\n        <FormControl>\r\n          <FormLabel htmlFor=\"image\">Image</FormLabel>\r\n          <Input\r\n            type=\"file\"\r\n            id=\"image\"\r\n            accept=\"image/*\"\r\n            onChange={onFileChange}\r\n          />\r\n        </FormControl>\r\n        {previewImageUrl && (\r\n          <Box mt={4}>\r\n            <img\r\n              src={previewImageUrl}\r\n              alt=\"Preview\"\r\n              style={{ width: \"200px\", height: \"auto\" }}\r\n            />\r\n          </Box>\r\n        )}\r\n        <Button colorScheme=\"teal\" type=\"submit\" mt={4}>\r\n          {itemId ? \"Update\" : \"Submit\"}\r\n        </Button>\r\n      </form>\r\n    </VStack>\r\n  );\r\n};\r\n\r\nexport default AddEditItems;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}